package lab8;

import java.util.List;
import java.util.stream.Collectors;

/**
 * FilterProcessor - —ç—Ç–æ –∫–ª–∞—Å—Å-—Ñ–∏–ª—å—Ç—Ä –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
 *
 * –ü—Ä–µ–¥—Å—Ç–∞–≤—å —Å–∏—Ç–æ –¥–ª—è –ø—Ä–æ—Å–µ–∏–≤–∞–Ω–∏—è –ø–µ—Å–∫–∞:
 * - –ö–ª–∞–¥–µ—à—å –ø–µ—Å–æ–∫ —Å –∫–∞–º–Ω—è–º–∏
 * - –ü—Ä–æ—Å–µ–∏–≤–∞–µ—à—å —á–µ—Ä–µ–∑ —Å–∏—Ç–æ
 * - –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ–ª–∫–∏–π –ø–µ—Å–æ–∫, –∫–∞–º–Ω–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç
 *
 * –¢–∞–∫ –∂–µ –∏ –∑–¥–µ—Å—å: –º—ã "–ø—Ä–æ—Å–µ–∏–≤–∞–µ–º" –ª—é–¥–µ–π –ø–æ —Ä–∞–∑–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º
 */
public class FilterProcessor {

    /**
     * –§–∏–ª—å—Ç—Ä –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É - –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã—Ö (—Å—Ç–∞—Ä—à–µ 18)
     *
     * –≠—Ç–æ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Ö–æ–¥–µ –≤ –∫–ª—É–± 18+:
     * - –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫—É 17 - –Ω–µ –ø—É—Å–∫–∞–µ–º
     * - –ï—Å–ª–∏ 18 –∏ –±–æ–ª—å—à–µ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
     *
     * @DataProcessor –ø–æ–º–µ—á–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
     * priority = 100 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ—Ç —Ñ–∏–ª—å—Ç—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –ø–µ—Ä–≤—ã—Ö
     */
    @DataProcessor(description = "–§–∏–ª—å—Ç—Ä –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É (—Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã–µ)", priority = 100)
    public List<Person> filterByAge(List<Person> people) {
        System.out.println("üîç –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä: –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã—Ö (–≤–æ–∑—Ä–∞—Å—Ç > 18)");

        // Stream API - —ç—Ç–æ –∫–∞–∫ –∫–æ–Ω–≤–µ–π–µ—Ä –Ω–∞ –∑–∞–≤–æ–¥–µ:
        // 1. people.stream() - –∫–ª–∞–¥–µ–º –≤—Å–µ—Ö –ª—é–¥–µ–π –Ω–∞ –∫–æ–Ω–≤–µ–π–µ—Ä
        // 2. filter(...) - –Ω–∞ –∫–æ–Ω–≤–µ–π–µ—Ä–µ —Å—Ç–æ–∏—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã—Ö
        // 3. collect(...) - —Å–æ–±–∏—Ä–∞–µ–º –æ—Ç–æ–±—Ä–∞–Ω–Ω—ã—Ö –ª—é–¥–µ–π –≤ –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫

        return people.stream()
                .filter(person -> person.getAge() > 18)  // –£—Å–ª–æ–≤–∏–µ: –≤–æ–∑—Ä–∞—Å—Ç –±–æ–ª—å—à–µ 18
                .collect(Collectors.toList());            // –°–æ–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ø–∏—Å–æ–∫
    }

    /**
     * –§–∏–ª—å—Ç—Ä –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–µ - –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤—ã—Å–æ–∫–æ–æ–ø–ª–∞—á–∏–≤–∞–µ–º—ã—Ö (–∑–∞—Ä–ø–ª–∞—Ç–∞ > 50000)
     *
     * –≠—Ç–æ –∫–∞–∫ –æ—Ç–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –ø—Ä–µ–º–∏—é:
     * - –°–º–æ—Ç—Ä–∏–º –Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç—É –∫–∞–∂–¥–æ–≥–æ
     * - –ï—Å–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç–∞ –±–æ–ª—å—à–µ 50000 - –∫–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç
     * - –ï—Å–ª–∏ –º–µ–Ω—å—à–µ - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
     */
    @DataProcessor(description = "–§–∏–ª—å—Ç—Ä –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–µ (> 50000)", priority = 90)
    public List<Person> filterBySalary(List<Person> people) {
        System.out.println("üí∞ –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä: –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π > 50000");

        return people.stream()
                .filter(person -> person.getSalary() > 50000)
                .collect(Collectors.toList());
    }

    /**
     * –§–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ - –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ—Ö, —á—å–µ –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "–ê"
     *
     * –≠—Ç–æ –∫–∞–∫ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ:
     * - –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª "–ê"
     * - –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
     * - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
     */
    @DataProcessor(description = "–§–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å '–ê')", priority = 80)
    public List<Person> filterByName(List<Person> people) {
        System.out.println("üìù –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä: –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∞ –Ω–∞ –±—É–∫–≤—É '–ê'");

        return people.stream()
                .filter(person -> person.getName().startsWith("–ê") ||
                                person.getName().startsWith("A"))
                .collect(Collectors.toList());
    }
}
